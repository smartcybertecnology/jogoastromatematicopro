<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astro-Matem√°tico PRO üöÄ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --cor-principal: #00ffff; /* Ciano Neon */
            --cor-secundaria: #ff00ff; /* Magenta Neon */
            --cor-fundo: #0a0a2a; /* Azul Escuro do Espa√ßo */
            --cor-acerto: #00ff00; /* Verde */
            --cor-erro: #ff4500; /* Laranja Vermelho */
            --cor-combo: #ffcc00; /* Dourado */
        }

        body {
            font-family: 'Orbitron', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--cor-fundo);
            color: var(--cor-principal);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh; 
            width: 100vw;       
            overflow: hidden;
            user-select: none;
        }

        #gameArea {
            position: relative;
            width: 100vw;       
            height: 100vh;     
            max-width: 100vw;
            max-height: 100vh;
            background: rgba(0, 0, 0, 0.4);
            border: 5px solid var(--cor-secundaria);
            box-shadow: 0 0 20px var(--cor-secundaria);
            overflow: hidden;
            cursor: crosshair;
            /* Estrelas de Fundo */
            background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
                              radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
                              radial-gradient(white, rgba(255,255,255,.1) 3px, transparent 50px);
            background-size: 550px 550px, 350px 350px, 250px 250px;
            background-position: 0 0, 40px 60px, 120px 200px;
            animation: move-stars 3s linear infinite;
        }

        @keyframes move-stars {
            from { background-position-y: 0, 60px, 200px; }
            to { background-position-y: 550px, 410px, 700px; }
        }

 /* Foguete VERTICAL (‚¨ÜÔ∏è) */
#player {
    position: absolute;
    bottom: 20px;
    left: calc(50% - 25px);
    width: 90px; /* Mantenha o tamanho */
    height: 90px; /* Mantenha o tamanho */
    transition: transform 0.05s ease-out;
    z-index: 15;
    transform: rotate(0deg); 

   
    font-size: 0; /* Op√ß√£o 1: Garante que o texto suma */
    
    background-image: url('player.gif');
    
    background-size: contain; /* Ajusta o GIF para caber no 50x50px */
    background-repeat: no-repeat; /* Garante que o GIF n√£o se repita */
    background-position: center; /* Centraliza o GIF */
}

/* Voc√™ pode manter o #player::after para o efeito de fogo, ele continua funcionando! */
#player::after {
    content: 'üî•';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.5em;
    opacity: 0;
    transition: opacity 0.1s;
}
        .shooting #player::after {
            opacity: 1;
        }

        /* Tiros */
        .bullet {
            position: absolute;
            width: 4px;
            height: 15px;
            background-color: var(--cor-principal);
            box-shadow: 0 0 10px var(--cor-principal), 0 0 5px white;
            border-radius: 2px;
            z-index: 10;
            transition: none;
        }

        /* Asteroides */
      
.asteroid {
  
    transform-origin: center center; 
    animation: none; 
    text-shadow: 0 0 5px black;
    
    position: absolute; /* MUITO IMPORTANTE para o posicionamento */
    width: 80px; /* Tamanho do seu asteroide */
    height: 80px; /* Tamanho do seu asteroide */
    
    /* ADICIONE ISSO para que a imagem seja o GIF */
    background-size: contain; 
    background-repeat: no-repeat;
    background-position: center;
}

/* NOVO: Estilo para o n√∫mero da resposta dentro do asteroide */
.asteroid span {
    /* ... (Mantenha o c√≥digo existente para o span) ... */
    background: rgba(0, 0, 0, 0.5); 
    padding: 2px 5px;
    border-radius: 5px;
    
    /* Garante que o n√∫mero fique vis√≠vel sobre o GIF */
    position: absolute; 
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2; /* Garante que fique acima do GIF (que √© o background) */
    color: var(--cor-principal); /* Garante que o n√∫mero seja leg√≠vel */
    font-size: 1em; /* Tamanho do n√∫mero */
}
        .destroyed { opacity: 0 !important; transform: scale(0.1) !important; transition: all 0.5s ease-out; }
        .old-asteroid { 
            opacity: 0.4; 
            border-color: #555; 
            box-shadow: none; 
            transition: all 1.5s ease-out; 
        }
        
        /* --- BOSS ESPEC√çFICO APRIMORADO PARA MAIS REALISMO --- */


#boss.vulnerable {
    border-color: var(--cor-acerto, lime);
    box-shadow: 0 0 20px var(--cor-acerto, lime), 0 0 40px rgba(0, 255, 0, 0.7);
}

#boss.hit {

    animation: bossShake 0.1s 3; /* Adiciona feedback de acerto */
    
}

.boss-gif {
    top: 0%;
    margin-right: 0%;
    margin-left: 0%;
    /* Ocupa a largura total da √°rea de conte√∫do (140px) */
    width: 100%; 
    
    /* üöÄ CORRE√á√ÉO CR√çTICA: Calcula a altura m√°xima. 
       A altura total √© 125px. Subtra√≠mos 35px-40px para o texto e suas margens. */
    max-height: calc(110% - 35px); 
    
    /* Garante que o GIF se expanda para preencher a √°rea, mesmo que corte um pouco */
    object-fit: cover; 
    
    display: block;
    margin: 0 auto; 
    
    /* Pequena margem para separar a imagem do texto */
    margin-bottom: 5px; 
}
/* --- 1. SELETOR PRINCIPAL: #boss --- */
#boss {
    /* Define um tamanho fixo para o Boss para ajudar na colis√£o */
    width: 140px; 
    height: 125px; 
    
    /* Centraliza o Boss (mantendo a flutua√ß√£o do JS) */
    position: absolute;
    top: 85px; 
    left: 50%; 
    transform: translateX(-50%); 
    
    /* Estilo de fundo/borda do Boss (opcional) */
    /* Garante que qualquer espa√ßo n√£o preenchido pelo GIF seja preto */
    background-color: black; 
    border: 3px solid #ff00ff;
    border-radius: 10px;
    
    /* MANTIDO: O padding √© essencial para dar espa√ßo ao texto */
    padding: 10px; 
    
    z-index: 100;
    
    /* Configura√ß√µes visuais do estado 'vulnerable' e 'invulnerable' */
    box-shadow: 0 0 25px #ff00ff, 0 0 50px rgba(255, 0, 255, 0.5);
    transition: box-shadow 0.3s, transform 0.1s;
    text-align: center;
}




/* --- 3. SELETOR DO TEXTO: .boss-question --- */
.boss-question {
    display: block;
    color: white;
    font-size: 1.1em;
    font-weight: bold;
    
    /* Garante que o texto fique encostado no topo do padding, sem empurrar o GIF */
    margin-top: 0; 
    margin-bottom: 5px; 
}

/* --- 4. SELETOR DA RESPOSTA: .boss-answer-display --- */
.boss-answer-display {
    color: var(--cor-acerto, lime);
    font-size: 1.5em;
    font-weight: bold;
    margin-top: 0; 
}

/* Keyframes para o efeito de tremor (hit) */
@keyframes bossShake {
    0% { transform: translate(calc(-50% - 5px), 0); }
    50% { transform: translate(calc(-50% + 5px), 0); }
    100% { transform: translate(-50%, 0); }
}

        /* Sistema de Part√≠culas para Explos√£o */
        .particle {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 20;
        }


/* --- Interface do Jogo (HUD) --- */
#hud {
    position: absolute;
    top: 0px;
    width: 96%;
    left: 1%;
    display: flex; 
    flex-wrap: wrap;
    justify-content: space-between; 
    align-items: flex-start; 
    padding: 10px;
    z-index: 30;
    background: rgba(0, 0, 0, 0.6);
    border-radius: 10px;
    border: 1px solid var(--cor-principal);
}

/* NOVO: Cont√™iner para manter Score e Combo agrupados e alinhados √† esquerda */
#scoreComboGroup {
    display: flex;
    flex-direction: column; /* Coloca os filhos (score e combo) um abaixo do outro */
    align-items: flex-start; /* Alinha o grupo √† esquerda */
}

/* Estrutura do Score (Label acima do valor) */
#scoreContainer { /* NOVO CONT√äINER NECESS√ÅRIO NO HTML */
    display: flex;
    flex-direction: column; 
    align-items: center; /* Centraliza o texto "Pontos:" e o n√∫mero */
    padding: 0;
}

.score-label { /* NOVA CLASSE NECESS√ÅRIA NO HTML */
    font-size: 0.8em; 
    color: #aaa; 
    text-shadow: 1px 1px 2px #000;
    margin-bottom: -5px; /* Ajusta o espa√ßamento entre label e n√∫mero */
}

#score {
    font-size: 1.5em;
    font-weight: bold;
    color: var(--cor-principal);
    /* Regras de flexbox antigas foram removidas aqui */
}

/* Estilo do Combo ajustado para ficar abaixo do score */
#combo {
    color: var(--cor-combo);
    font-size: 1.0em;
    text-shadow: 0 0 8px var(--cor-combo);
    text-align: left;
    margin-top: 5px; /* Espa√ßo entre o Score e o Combo */
    /* Regras de flexbox antigas foram removidas aqui */
    display: none; 
}

.combo-active {
    display: block !important;
    animation: combo-pulse 0.5s infinite alternate;
}

/* Novo Cont√™iner para Lado Direito */
#rightSideHUD {
    display: flex;
    flex-direction: column; /* FOR√áA LIVES E BOSSHEALTH A FICAREM UM ABAIXO DO OUTRO */
    align-items: flex-end; /* Alinha o texto das divs √† direita */
    margin-left: auto; /* Empurra o grupo para o lado direito */
}

/* AJUSTE CORRIGIDO: Garante que o texto 'BOSS HP:' e os cora√ß√µes fiquem na mesma linha */
#bossHealth {
    font-size: 1.2em;
    font-weight: 900;
    color: var(--cor-erro);
    
    /* NOVO: Usa Flexbox para alinhar o texto 'BOSS HP:' e o conte√∫do da barra */
    display: flex; 
    align-items: center; /* Alinhamento vertical entre texto e cora√ß√µes */
    justify-content: flex-end; /* Alinha o conte√∫do √† direita */

    width: 100%; /* Ocupa a largura total do cont√™iner direito */
    min-width: 150px; 
    /* display: none; // Essa linha √© controlada pelo JS, mas precisa ser alterada para 'flex' ou 'block' no JS durante a luta */
}

/* NOVO: Estilo para o cont√™iner dos cora√ß√µes (boss-hp-bar) */
.boss-hp-bar {
    margin-left: 5px; /* Espa√ßo entre o texto 'BOSS HP:' e a barra de cora√ß√µes */
    display: flex; /* Garante que os spans de cora√ß√£o fiquem lado a lado */
    align-items: center;
}

/* Opcional: Ajusta o tamanho dos cora√ß√µes do Boss */
.boss-hp-bar span {
    font-size: 1.2em; 
    margin: 0 1px;
}

/* Voc√™ pode precisar ajustar #lives para remover o flex-grow */
#lives {
    color: var(--cor-erro);
    font-size: 1.5em;
    /* Removido: flex-basis: auto; */
    /* Removido: text-align: right; */
}

/* Caixa de Pergunta Central */
.question-box {
    position: absolute;
    top: 0%;
    left: 50%;
    transform: translateX(-50%);
    padding: 1px 30px;
    font-size: 2em;
    font-weight: 900;
    background: rgba(0, 0, 0, 0.7);
    border: 3px solid var(--cor-principal);
    box-shadow: 0 0 15px var(--cor-principal);
    border-radius: 10px;
    z-index: 25;
    animation: pulse-question 1.5s infinite alternate;
}
/* NOVO ESTILO: Para mensagens de erro/repelidas */
.question-box.error-msg {
    color: var(--cor-erro); /* Muda a cor do texto para laranja/vermelho */
    border-color: var(--cor-erro); /* Muda a borda */
    box-shadow: 0 0 15px var(--cor-erro); /* Muda o brilho */
    animation: shake 0.3s; /* Adiciona um pequeno tremor */
}

@keyframes shake {
    0%, 100% { transform: translateX(-50%); }
    25% { transform: translateX(calc(-50% - 5px)); }
    75% { transform: translateX(calc(-50% + 5px)); }
}
/* NOVO ESTILO: Para mensagens de Alerta/Foco */
.question-box.alert-msg {
    color: var(--cor-secundaria); /* Magenta Neon */
    border-color: var(--cor-secundaria);
    box-shadow: 0 0 20px var(--cor-secundaria), 0 0 10px white;
    animation: alert-pulse 1s infinite alternate; /* Novo efeito de pulsa√ß√£o */
}

@keyframes alert-pulse {
    from {
        box-shadow: 0 0 15px var(--cor-secundaria), 0 0 5px white;
        transform: translateX(-50%) scale(1);
    }
    to {
        box-shadow: 0 0 30px var(--cor-secundaria), 0 0 10px var(--cor-principal);
        transform: translateX(-50%) scale(1.03);
    }
}


/* Telas de Overlay */
#overlay, #gameOverScreen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    
    /* ‚≠ê CORRE√á√ÉO 1: Fundo S√ìLIDO (opacidade 1) para esconder o jogo por baixo. ‚≠ê */
    background: rgba(0, 0, 0, 1); 
    
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    
    /* ‚≠ê CORRE√á√ÉO 2: Aumentar o z-index para garantir que esteja acima de TUDO. ‚≠ê */
    z-index: 1000; 
}

#startButton, #restartButton {
    padding: 15px 30px;
    font-size: 1.5em;
    font-weight: 700;
    border: 3px solid var(--cor-secundaria);
    background-color: var(--cor-fundo);
    color: var(--cor-secundaria);
    cursor: pointer;
    border-radius: 10px;
    transition: all 0.3s;
    box-shadow: 0 0 15px var(--cor-secundaria);
    margin-top: 20px;
}

#startButton:hover, #restartButton:hover {
    background-color: var(--cor-secundaria);
    color: var(--cor-fundo);
    box-shadow: 0 0 25px var(--cor-principal);
    transform: scale(1.05);
}
/* NOVO: Estilo para o Bot√£o SAIR */
#exitButton {
    /* Estilos base */
    background: var(--cor-fundo);
    color: var(--cor-erro);
    border: 1px solid var(--cor-erro);
    padding: 5px 10px;
    font-size: 0.8em;
    font-weight: 700;
    cursor: pointer;
    border-radius: 5px;
    transition: all 0.3s;
    text-decoration: none; /* Para parecer um bot√£o, n√£o um link */

    /* Posicionamento no HUD (canto superior esquerdo) */
    order: -1; /* For√ßa a ir para o in√≠cio do flex container */
    margin-right: 15px; /* Espa√ßo √† direita para separar do score/combo */
}

#exitButton:hover {
    background-color: var(--cor-erro);
    color: var(--cor-fundo);
    box-shadow: 0 0 10px var(--cor-erro);
    transform: scale(1.05);
}
    </style>
</head>
<body>

<div id="gameArea">
    <div id="hud">
        <a id="exitButton" href="brincadeiras3.html" onclick="return confirmExit();">SAIR</a>
        <div id="scoreComboGroup">
            <div id="scoreContainer">
                <div class="score-label">Pontos:</div>
                <div id="score">0</div>
            </div>
            <div id="combo"></div> 
        </div>
        
        <div id="question" class="question-box"></div>
        <div id="rightSideHUD">
            <div id="lives">Vidas: üíñüíñüíñ</div>
            <div id="bossHealth"></div>
        </div>
    </div>
</div>
  

    <div id="player">‚¨ÜÔ∏è</div>

    <div id="overlay">
        <h1>Astro-Matem√°tico PRO üåå</h1>
        <p>Destrua o asteroide com a resposta correta e veja seu combo aumentar!</p>
        <p>A cada 10 acertos, um **Boss de Fase** surgir√°!</p>
        <p>Use **Setas** ou **WASD** para mover, **Espa√ßo** ou **Mouse Click** para atirar.</p>
        <button id="startButton">INICIAR MISS√ÉO</button>
    </div>
    
<div id="gameOverScreen" style="display: none;">
    <h2>MISS√ÉO FRACASSADA</h2>
    
    <p>Pontua√ß√£o Final: <span id="finalScore">0</span></p>
    
    <button id="restartButton" onclick="startGame()">TENTAR NOVAMENTE</button>
</div>
</div>

<script src="error.js"></script>
</body>
</html>