<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=2.0">
    <title>Astro-Matem√°tico PRO üöÄ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
   <style>
        :root {
            --cor-principal: #00ffff; 
            --cor-secundaria: #ff00ff; 
            --cor-fundo: #0a0a2a; 
            --cor-acerto: #00ff00;
            --cor-erro: #ff4500; 
            --cor-combo: #ffcc00; 
          
            --ad-height: 64px; 
            --player-min: 32px;
            --player-max: 63px;
            --asteroid-max: 65px;
            --hud-padding: 10px;
        }

        body {
    font-family: 'Orbitron', sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--cor-fundo);
    color: var(--cor-principal);
    
    display: flex;
    flex-direction: column; 
    align-items: center;
    
    height: 100vh; 
    min-height: 100vh; 
    width: 100vw; 
    
    overflow: hidden; 
    user-select: none;
    touch-action: none;
        max-width: 100%; 
}
        #gameArea {
            position: relative;
            box-sizing: border-box;
            width: min(98vw, 1000px);
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.4);
            border: 4px solid var(--cor-secundaria);
            box-shadow: 0 0 20px var(--cor-secundaria);
            overflow: hidden;
            cursor: crosshair;
            touch-action: none;
            min-height: calc(100vh - var(--ad-height));
            height: calc(100vh - var(--ad-height));
            display: block;
            background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
                              radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
                              radial-gradient(white, rgba(255,255,255,.1) 3px, transparent 50px);
            background-size: 550px 550px, 350px 350px, 250px 250px;
            background-position: 0 0, 40px 60px, 120px 200px;
            animation: move-stars 3s linear infinite;
        }

        @keyframes move-stars {
            from { background-position-y: 0, 60px, 200px; }
            to { background-position-y: 550px, 410px, 700px; }
        } 
    #adArea {
            height: 43px; 
            flex-shrink: 0; 
            
            width: 100vw;
            max-width: 100vw; 
            text-align: center;
            padding: 10px 0; 
            background-color: rgba(0, 0, 0, 0.5); 
            border-top: 2px solid var(--cor-principal);
            z-index: 500;
        }
        html, body {
            height: 100%;
        }

        #gameArea {
            min-height: calc(100vh - 64px);
            width: 98vw;
            max-width: 100%;
        }
        @media (max-width: 600px) {
            #adArea {
                position: fixed;
                left: 0;
                right: 0;
                bottom: env(safe-area-inset-bottom, 0);
                width: 100%;
                z-index: 400;
                padding-bottom: env(safe-area-inset-bottom, 0);
                height: calc(var(--ad-height) + env(safe-area-inset-bottom, 0));
            }
            #gameArea {
                padding-bottom: calc(var(--ad-height) + env(safe-area-inset-bottom, 0));
                min-height: calc(100vh - var(--ad-height) - env(safe-area-inset-bottom, 0));
                width: 96vw;
            }
            body {
                padding-bottom: 0; 
            }
        }
        @media (max-width: 420px) {
            :root { --ad-height: 72px; }
            #gameArea {
                height: calc(100vh - var(--ad-height));
                min-height: calc(100vh - var(--ad-height));
                width: 96vw;
                padding-bottom: calc(var(--ad-height) + env(safe-area-inset-bottom));
            }
            #player { width: clamp(var(--player-min), 12vw, var(--player-max)); height: clamp(var(--player-min), 12vw, var(--player-max)); bottom: calc(12px + env(safe-area-inset-bottom, 0)); }
            .asteroid { width: 18vw; height: 18vw; max-width: calc(var(--asteroid-max) - 8px); max-height: calc(var(--asteroid-max) - 8px); }
            #hud { padding: calc(var(--hud-padding) - 2px); }
            .question-box { font-size: clamp(1.0em, 4vw, 1.4em); padding: 6px 12px; }
            #shootButton { padding: 20px 25px; font-size: 0.95rem; bottom: calc(var(--ad-height) + env(safe-area-inset-bottom, 0) + 8px); z-index: 1200; }
        }
    #hud { z-index: 2000; }
    .temp-message { position: fixed; top: 50%; left: 50%; transform: translate(-50%,-50%); z-index: 1800; pointer-events: none; }

        #player {
    position: absolute;
    
    
    width: clamp(42px, 10vw, 63px); 
    height: clamp(42px, 10vw, 63px);
    
    background-image: url('player.gif');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    transition: transform 0.05s ease-out;
    z-index: 15;
    outline: none;
    user-select: none;
    pointer-events: none; 
    cursor: none; 
}

#player::after {
    content: 'üî•';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.5em;
    opacity: 0;
    transition: opacity 0.1s;
}

        .shooting #player::after {
            opacity: 1;
        }
        .bullet {
            position: absolute;
            width: 4px;
            height: 15px;
            background-color: var(--cor-principal);
            box-shadow: 0 0 10px var(--cor-principal), 0 0 5px white;
            border-radius: 2px;
            z-index: 10;
            transition: none;
        }

        .asteroid {
            
            transform-origin: center center; 
            animation: none; 
            text-shadow: 0 0 5px black;
            
            position: absolute; 
            width: 14vw; 
            height: 14vw; 
            max-width: 65px;
            max-height: 65px;
            background-size: contain; 
            background-repeat: no-repeat;
            background-position: center;
        }

        .asteroid span {
            background: rgba(0, 0, 0, 0.5); 
            padding: 2px 5px;
            border-radius: 5px;
            position: absolute; 
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2; 
            color: var(--cor-principal); 
            font-size: 1.2rem;
        }
        .destroyed { opacity: 0 !important; transform: scale(0.1) !important; transition: all 0.5s ease-out; }
        .old-asteroid { 
            opacity: 0.4; 
            border-color: #555; 
            box-shadow: none; 
            transition: all 1.5s ease-out; 
        }


        #boss.vulnerable {
            border-color: var(--cor-acerto, lime);
            box-shadow: 0 0 20px var(--cor-acerto, lime), 0 0 40px rgba(0, 255, 0, 0.7);
        }

        #boss.hit {

            animation: bossShake 0.1s 3;
            
        }

        .boss-gif {
            top: 0%;
            margin-right: 0%;
            margin-left: 0%;
            width: 100%; 
            max-height: calc(110% - 35px); 
            object-fit: cover; 
            
            display: block;
            margin: 0 auto; 
      
            margin-bottom: 5px; 
        }
    
        #boss {
        width: clamp(90px, 25vw, 150px);
            height: auto; 
            position: absolute;
            top: 8vh;
            left: 50%; 
            transform: translateX(-50%); 
            background-color: black; 
            border: 3px solid #ff00ff;
            border-radius: 10px;
            padding: 10px; 
            z-index: 100;
            box-shadow: 0 0 25px #ff00ff, 0 0 50px rgba(255, 0, 255, 0.5);
            transition: box-shadow 0.3s, transform 0.1s;
            text-align: center;
        }




       
        .boss-question {
            display: block;
            color: white;
            font-size: clamp(0.8rem, 3vw, 1.1rem);
            font-weight: bold;
            
           
            margin-top: 0; 
            margin-bottom: 5px; 
        }

       
        .boss-answer-display {
            color: var(--cor-acerto, lime);
            font-size: clamp(1.2rem, 4vw, 1.5rem); 
            font-weight: bold;
            margin-top: 0; 
        }


        @keyframes bossShake {
            0% { transform: translate(calc(-50% - 5px), 0); }
            50% { transform: translate(calc(-50% + 5px), 0); }
            100% { transform: translate(-50%, 0); }
        }

        .particle {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 20;
        }

    
        #leftSideHUD {
            display: flex;
            flex-direction: column;
            align-items: flex-start; 
        }
        
      /* Grupo de pontua√ß√£o e combo lado a lado */
#scoreComboGroup {
    display: flex;
    flex-direction: row; /* lado a lado */
    align-items: center;
    gap: 10px; /* espa√ßamento entre o score e o combo */
    margin-top: 5px;
}

/* Caixa de pontua√ß√£o */
#scoreContainer {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

/* R√≥tulo ‚ÄúPontos:‚Äù */
.score-label {
    font-size: 0.8em;
    color: #aaa;
    text-shadow: 1px 1px 2px #000;
    margin-bottom: -5px;
}

/* Valor da pontua√ß√£o */
#score {
    font-size: 1.5em;
    font-weight: bold;
    color: var(--cor-principal);
}

/* Combo ao lado do score */
#combo {
    color: var(--cor-combo);
    font-size: 1.2em;
    font-weight: 900;
    text-shadow: 0 0 8px var(--cor-combo);
    display: none; /* s√≥ aparece quando ativo */
}

/* Efeito visual quando o combo est√° ativo */
.combo-active {
    display: block !important;
    animation: combo-pulse 0.6s infinite alternate;
}

@keyframes combo-pulse {
    from { text-shadow: 0 0 5px var(--cor-combo), 0 0 10px white; transform: scale(1); }
    to   { text-shadow: 0 0 15px var(--cor-combo), 0 0 25px white; transform: scale(1.1); }
}

        #rightSideHUD {
            display: flex;
            flex-direction: column; 
            align-items: flex-end; 
            margin-left: auto; 
        }

      /* Container principal da barra */
.boss-hp-bar {
    width: 300px; /* Largura da barra (ajuste se precisar) */
    height: 20px; /* Altura da barra */
    background-color: #333; /* Cor de fundo da barra vazia (cinza escuro) */
    border: 2px solid #fff; /* Borda branca para destaque */
    border-radius: 5px;
    margin-left: 10px; /* Espa√ßamento ap√≥s o texto 'BOSS HP:' */
    position: relative; /* Importante para posicionar o fill e o texto */
    overflow: hidden; /* Garante que o fill n√£o exceda a borda */
}

/* Preenchimento da vida */
.boss-hp-fill {
    height: 100%;
    /* A cor de fundo ser√° definida no JavaScript (verde ou vermelho) */
    transition: width 0.3s ease-out; /* Anima√ß√£o suave na mudan√ßa de vida */
    position: absolute;
    left: 0;
    top: 0;
}

/* Estiliza√ß√£o opcional do texto de HP */
.boss-hp-bar .hp-text {
    position: absolute;
    width: 100%;
    text-align: center;
    line-height: 20px; /* Centraliza verticalmente com a altura da barra */
    color: white;
    font-weight: bold;
    text-shadow: 1px 1px 2px #000;
    z-index: 2; /* Fica acima do preenchimento */
}

/* Se o seu bossHealthDisplay for um flexbox, o alinhamento ficar√° bom: */
#bossHealthDisplay {
    display: flex;
    align-items: center;
    font-size: 1.2em;
    color: white;
    text-shadow: 1px 1px 2px #000;
}

#hud {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 96%;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 8px 12px;
    z-index: 100;
    background: none;
    border-radius:none;
    border: none;
    box-shadow:none;
}

/* Caixa da quest√£o - abaixo do HUD */
.question-box {
    position: absolute;
    top: 92px;  /* mant√©m a mesma dist√¢ncia do HUD */
    left: 50%;
    transform: translateX(-50%);
    display: inline-block;
    padding: 6px 14px;
    font-size: clamp(1.1em, 4vw, 1.6em);
    font-weight: 900;
    background: rgba(0, 0, 0, 0.8);
    border: 3px solid var(--cor-principal);
    box-shadow: 0 0 15px var(--cor-principal);
    border-radius: 10px;
    color: var(--cor-principal);
    z-index: 90;
    text-align: center;
}
/* NOVO ESTILO PARA O T√çTULO DO BOSS (ser√° criado dinamicamente) */
.boss-title-popup {
    /* Base do estilo anterior de #bossFightTitle */
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 92px; 
    z-index: 1900; /* Alto z-index */
    
    font-size: clamp(1.5em, 6vw, 2.5em);
    color: var(--cor-acerto);
    border: 3px solid var(--cor-acerto);
    padding: 5px 15px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.8);
    box-shadow: 0 0 25px var(--cor-acerto), 0 0 10px white; /* Mais brilho! */

    /* Efeito de 2 segundos */
    animation: boss-intro 2s ease-out forwards;
}

/* NOVO KEYFRAMES: Desaparecimento com Escala e Opacidade */
@keyframes boss-intro {
    0% {
        opacity: 0;
        transform: translate(-50%, -20px) scale(0.8);
    }
    10% {
        opacity: 1; /* Aparece rapidamente */
        transform: translate(-50%, 0) scale(1);
    }
    90% {
        opacity: 1; /* Fica vis√≠vel por quase 2 segundos */
        transform: translate(-50%, 0) scale(1.05); /* Pequeno pulso */
    }
    100% {
        opacity: 0; /* Desaparece */
        transform: translate(-50%, 0) scale(1.1); /* Escale um pouco para o efeito 'top' */
    }
}

        .question-box.error-msg {
            color: var(--cor-erro); 
            border-color: var(--cor-erro); 
            box-shadow: 0 0 15px var(--cor-erro); 
            animation: shake 0.3s; 
        }

        @keyframes shake {
            0%, 100% { transform: translateX(-50%); }
            25% { transform: translateX(calc(-50% - 5px)); }
            75% { transform: translateX(calc(-50% + 5px)); }
        }
        .question-box.alert-msg {
            color: var(--cor-secundaria);
            border-color: var(--cor-secundaria);
            box-shadow: 0 0 20px var(--cor-secundaria), 0 0 10px white;
            animation: alert-pulse 1s infinite alternate; 
        }

        @keyframes alert-pulse {
            from {
                box-shadow: 0 0 15px var(--cor-secundaria), 0 0 5px white;
                transform: translateX(-50%) scale(1);
            }
            to {
                box-shadow: 0 0 30px var(--cor-secundaria), 0 0 10px var(--cor-principal);
                transform: translateX(-50%) scale(1.03);
            }
        }


        #overlay, #gameOverScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            
            background: rgba(0, 0, 0, 1); 
            
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            
            z-index: 10000; 
        }

        #startButton, #restartButton {
            padding: 15px 30px;
            font-size: 1.5em;
            font-weight: 700;
            border: 3px solid var(--cor-secundaria);
            background-color: var(--cor-fundo);
            color: var(--cor-secundaria);
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s;
            box-shadow: 0 0 15px var(--cor-secundaria);
            margin-top: 20px;
        }

        #startButton:hover, #restartButton:hover {
            background-color: var(--cor-secundaria);
            color: var(--cor-fundo);
            box-shadow: 0 0 25px var(--cor-principal);
            transform: scale(1.05);
        }
        #exitButton {
            background: var(--cor-fundo);
            color: var(--cor-erro);
            border: 1px solid var(--cor-erro);
            padding: 5px 10px;
            font-size: 0.8em;
            font-weight: 700;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
            text-decoration: none;
        }

        #exitButton:hover {
            background-color: var(--cor-erro);
            color: var(--cor-fundo);
            box-shadow: 0 0 10px var(--cor-erro);
            transform: scale(1.05);
        }

        #shootButton {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 20px 25px;
            font-size: 1.2rem;
            background-color: var(--cor-acerto);
            color: white;
            border: 3px solid white;
            border-radius: 10px;
            cursor: pointer;
            z-index: 1000; 
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
            
            display: none; 
        }

        @media (max-width: 768px) {
            #shootButton {
                display: block; 
                position: fixed;
                z-index: 1100;
                right: 12px;
                bottom: calc(var(--ad-height) + 8px);
                box-shadow: 0 6px 10px rgba(0,0,0,0.5);
            }
        }
/* üåå Buraco Negro Realista */
/* üåå Buraco Negro ‚Äî aumento e diminui√ß√£o suaves, sem delay */
.black-hole-visual {
    position: absolute;
    width: 90px;
    height: 90px;
    background: radial-gradient(circle at center, #000 40%, #050505 70%, rgba(0,0,0,0) 100%);
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0.05);
    opacity: 0;
    animation: blackHoleLife 1.9s cubic-bezier(0.4, 0, 0.2, 1) forwards; /* curva suave */
    z-index: 20;
    overflow: visible;
    box-shadow:
        0 0 60px rgba(10, 60, 180, 0.3),
        inset 0 0 50px rgba(0, 0, 0, 0.9);
}

/* Disco de acre√ß√£o ‚Äî luz azul-dourada girando */
.black-hole-visual::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 160px;
    height: 160px;
    border: 3px solid transparent;
    border-top-color: rgba(255, 220, 150, 0.8);
    border-right-color: rgba(120, 180, 255, 0.8);
    border-radius: 50%;
    transform: translate(-50%, -50%) rotate(0deg);
    animation: accretionRotate 1s linear infinite;
    box-shadow:
        0 0 40px rgba(255, 220, 150, 0.4),
        0 0 60px rgba(100, 160, 255, 0.2);
    filter: blur(0.5px);
}

/* Efeito de distor√ß√£o gravitacional ao redor */
.black-hole-visual::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 230px;
    height: 230px;
    background: radial-gradient(circle, rgba(10,10,30,0.25) 30%, rgba(0,0,0,0) 80%);
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(1);
    animation: gravityWave 2.1s ease-in-out infinite;
    z-index: -1;
}

/* Anima√ß√£o suave e cont√≠nua ‚Äî surge e some sem delay */
@keyframes blackHoleLife {
    0% {
        transform: translate(-50%, -50%) scale(0.05);
        opacity: 0;
    }
    50% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
    }
    100% {
        transform: translate(-50%, -50%) scale(0.01);
        opacity: 0;
        filter: blur(8px);
    }
}

/* Rota√ß√£o cont√≠nua do disco */
@keyframes accretionRotate {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Ondas gravitacionais pulsantes */
@keyframes gravityWave {
    0%, 100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.45;
    }
    50% {
        transform: translate(-50%, -50%) scale(1.08);
        opacity: 0.8;
    }
}

/* Proj√©teis do boss (mantido) */
.asteroid.boss-projectile {
    width: 30px;
    height: 30px;
}

    </style>
</head>
<body>

<div id="gameArea">


    <div id="hud">
        <div id="leftSideHUD">
            <a id="exitButton" href="brincadeiras3.html" onclick="return confirmExit();">SAIR</a>
            
            <div id="scoreComboGroup">
                <div id="scoreContainer">
                    <div class="score-label">Pontos:</div>
                    <div id="score">0</div>
                </div>
                <div id="combo"></div> 
            </div>
        </div>
        
        <div id="rightSideHUD">
            <div id="lives">Vidas: üíñüíñüíñ</div>
            <div id="bossHealth"></div>
        </div>
    </div>
    
    <div id="question" class="question-box"></div>

    <div id="player"></div>

</div> <button id="shootButton">üî´ DISPARAR</button>

<div id="overlay">
    <h1>Astro-Matem√°tico PRO üåå</h1>
    <p>Destrua o asteroide com a resposta correta e veja seu combo aumentar!</p>
    <p>A cada 10 acertos, um **Boss de Fase** surgir√°!</p>
    <p>Use **Setas** ou **WASD** para mover, **Espa√ßo** ou **Mouse Click** para atirar.</p>
    <button id="startButton">INICIAR MISS√ÉO</button>
</div>

<div id="gameOverScreen" style="display: none;">
    <h2>MISS√ÉO FRACASSADA</h2>

    <p>Pontua√ß√£o Final: <span id="finalScore">0</span></p>
    
    <button id="restartButton" onclick="startGame()">TENTAR NOVAMENTE</button>
</div> <script src="error.js"></script>
<div id="adArea">
    <div> 
        <script type="text/javascript">
        atOptions = {
        'key' : 'bbf348585df7afae438e1754d1003d92',
        'format' : 'iframe',
        'height' : 50,
        'width' : 320,
        'params' : {}
        };
        </script>
        <script type="text/javascript" src="https://www.highperformanceformat.com/bbf348585df7afae438e1754d1003d92/invoke.js"></script>
    </div>
</div>

</body>
</html>
